(this["webpackJsonpdoctor-hours"]=this["webpackJsonpdoctor-hours"]||[]).push([[0],{19:function(e,t,a){},22:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(14),s=a.n(c),i=(a(19),a(4)),o=a(1),d=a.n(o),u=a(5),l=a(3),j=a(0),f={getWeekData:function(){},setWeekData:function(){return null}},b=Object(n.createContext)(f),m={},h="SET_WEEK_DATA";function O(e,t){switch(t.type){case h:return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t.week,t.data));default:throw new Error}}function v(e){var t=e.children,a=Object(n.useReducer)(O,m),r=Object(i.a)(a,2),c=r[0],s=r[1];return Object(j.jsx)(b.Provider,{value:{getWeekData:function(e){return c[e]},setWeekData:function(e,t){s({type:h,week:e,data:t})}},children:t})}function k(){return Object(n.useContext)(b)}a(22);function y(e){var t=e.week;return Object(j.jsx)("div",{className:"title",children:function(){var e=d()().week(t),a=d()(e).isoWeekday(1),n=d()(e).isoWeekday(6),r=d()().week();return r===t?"Current week (".concat(a.format("DD.MM")," - ").concat(n.format("DD.MM"),")"):r+1===t?"Next week (".concat(a.format("DD.MM")," - ").concat(n.format("DD.MM"),")"):"Week ".concat(t," (").concat(a.format("DD.MM")," - ").concat(n.format("DD.MM"),")")}()})}var x=a(8),p=a.n(x),g=a(11);function w(e){var t=e.size,a=void 0===t?"medium":t;return Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)("div",{className:"spinning-loader ".concat(a)})})}a(24);function I(e){var t=e.children,a=function(e){var t=Object(n.useState)(!0),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(),o=Object(i.a)(s,2),d=o[0],u=o[1];return Object(n.useEffect)((function(){function t(){return(t=Object(g.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.next=3,e();case 3:a=t.sent,u(a.response),c(!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),{isLoading:r,data:d}}(e.promiseGetter),r=a.isLoading,c=a.data;return r?Object(j.jsx)(w,{}):Object(j.jsx)(j.Fragment,{children:c?t(c):"error"})}var S=a(6),D=a(7),N=a(13),W=["monday","tuesday","wednesday","thursday","friday","saturday"],E=function(){function e(){Object(S.a)(this,e)}return Object(D.a)(e,[{key:"isValidWeek",value:function(e){var t=7===d()().isoWeekday(),a=6===d()().isoWeekday()&&d()().date()%2===0;return!(d()().week()===e&&(a||t))}},{key:"randomIntFromInterval",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"initializeTerms",value:function(){for(var e=[],t=0;t<12;t++)e.push({timeSlotId:t,state:6!==t?"AVAILIBLE":"BREAK"});return e}},{key:"initializeOddSaturdayOrPastDateTerms",value:function(){for(var e=[],t=0;t<12;t++)e.push({timeSlotId:t,state:"INVALID"});return e}},{key:"generateCalendarWeek",value:function(e){var t=this,a=this.initializeTerms(),n=this.initializeOddSaturdayOrPastDateTerms(),r=d()().week(e),c=d()(r).isoWeekday("Saturday").date()%2===1,s=d()(),i={monday:s.isAfter(d()(r).isoWeekday("Monday"))?n:a,tuesday:s.isAfter(d()(r).isoWeekday("Tuesday"))?n:a,wednesday:s.isAfter(d()(r).isoWeekday("Wednesday"))?n:a,thursday:s.isAfter(d()(r).isoWeekday("Thursday"))?n:a,friday:s.isAfter(d()(r).isoWeekday("Friday"))?n:a,saturday:c?a:n};if(this.isValidWeek(e))for(var o=function(e){var a=t.randomIntFromInterval(0,11);a=6===a?a+t.randomIntFromInterval(-6,5):a;for(var n=t.randomIntFromInterval(0,c?W.length-1:W.length-2),r=W[n];"AVAILIBLE"!==i[r][a].state;)a=6===(a=t.randomIntFromInterval(0,11))?a+t.randomIntFromInterval(-6,5):a,n=t.randomIntFromInterval(0,c?W.length-1:W.length-2),r=W[n];var s=i[r].map((function(e){return e.timeSlotId===a?Object(l.a)(Object(l.a)({},e),{},{state:"OCCUPIED"}):e}));i=Object(l.a)(Object(l.a)({},i),{},Object(u.a)({},r,s))},j=0;j<15;j++)o();return i}}]),e}(),C=new(function(){function e(){Object(S.a)(this,e),this.data=void 0,this.generator=void 0,this.data={},this.generator=new E}return Object(D.a)(e,[{key:"generateWeekData",value:function(e){var t=this.generator.generateCalendarWeek(e);return this.data=Object(l.a)(Object(l.a)({},this.data),{},Object(u.a)({},e,t)),t}},{key:"updateTimeSlotState",value:function(e,t,a,n){var r=this.data[e],c=r[t].map((function(e){return e.timeSlotId===a?Object(l.a)(Object(l.a)({},e),{},{state:n}):e})),s=Object(l.a)(Object(l.a)({},r),{},Object(u.a)({},t,c));return this.data=Object(l.a)(Object(l.a)({},this.data),{},Object(u.a)({},e,s)),s}},{key:"isSelectionValid",value:function(e,t){var a=this.data[e],n=a[t].some((function(e){return"SELECTED"===e.state})),r=Object.values(a).reduce((function(e,t){return[].concat(Object(N.a)(e),Object(N.a)(t))}),[]).filter((function(e){return"SELECTED"===e.state}));return console.log(n),!n&&r.length<=1}}]),e}()),T=new(function(){function e(){Object(S.a)(this,e)}return Object(D.a)(e,[{key:"getMockCalendarWeekData",value:function(e){return new Promise((function(t){return setTimeout((function(){t({status:"ok",response:C.generateWeekData(e)})}),2e3)}))}},{key:"updateTimeSlotState",value:function(e){var t="AVAILIBLE"===e.slotState||C.isSelectionValid(e.week,e.day);return new Promise((function(a,n){return setTimeout((function(){t?a({status:"ok",response:C.updateTimeSlotState(e.week,e.day,e.timeSlotId,e.slotState)}):n("error")}),1e3)}))}}]),e}()),A=["monday","tuesday","wednesday","thursday","friday","saturday"];function L(e){var t=e.week,a=k().getWeekData(t);return Object(j.jsx)("div",{className:"week",children:a?Object(j.jsx)(M,{week:t,data:a}):Object(j.jsx)(I,{promiseGetter:function(){return T.getMockCalendarWeekData(t)},children:function(e){return Object(j.jsx)(M,{week:t,data:e})}})})}function M(e){var t=e.week,a=e.data,r=k(),c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],u=s[1];function l(){return(l=Object(g.a)(p.a.mark((function e(a,n,c){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("INVALID"!==a&&"BREAK"!==a){e.next=4;break}alert("This time slot is not valid for selection, please choose another time slot!"),e.next=20;break;case 4:if("OCCUPIED"!==a){e.next=8;break}alert("This time slot is already booked by another doctor patient, please choose another time slot!"),e.next=20;break;case 8:if("SELECTED"!==a){e.next=15;break}return u(!0),e.next=12,T.updateTimeSlotState({week:t,day:n,timeSlotId:c,slotState:"AVAILIBLE"}).then((function(e){return r.setWeekData(t,e.response)}));case 12:u(!1),e.next=20;break;case 15:if("AVAILIBLE"!==a){e.next=20;break}return u(!0),e.next=19,T.updateTimeSlotState({week:t,day:n,timeSlotId:c,slotState:"SELECTED"}).then((function(e){return r.setWeekData(t,e.response)})).catch((function(){return alert("You have already selected appoinment for that day or you have already two appoinments planned for the week")}));case 19:u(!1);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){if(t){var a=t.find((function(t){return t.timeSlotId===e}));return a?a.state:"INVALID"}return"INVALID"}function b(e,t,a,n){e.startOf("day").hours(t);for(var r=[],c=0;e.hours()<a;)r.push({slotState:f(c,n),day:d()(e),dayName:A[e.isoWeekday()-1],timeSlotIndex:c}),e.add(30,"m"),c++;return r.map((function(e){var t="timeslot ".concat(e.slotState.toLowerCase());return Object(j.jsx)("div",{onClick:function(){return function(e,t,a){return l.apply(this,arguments)}(e.slotState,e.dayName,e.timeSlotIndex)},className:t,children:"".concat(e.day.format("HH:mm"))},e.day.format())}))}return Object(n.useEffect)((function(){r.setWeekData(t,a)}),[a]),o?Object(j.jsx)(w,{size:"large"}):function(){var e=d()().week(t);return Object(j.jsx)(j.Fragment,{children:A.map((function(t){var n=d()(e).isoWeekday(t),r=n.isSame(d()()),c=n.date()%2===1||"saturday"===t?b(n,8,14,a[t]):b(n,13,19,a[t]);return Object(j.jsxs)("div",{className:"day-container",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"day ".concat(r&&"current-day"),children:t.toUpperCase()}),Object(j.jsx)("i",{className:"date ".concat(r&&"current-day"),children:n.format("DD.MM")})]}),c]},t)}))})}()}function F(e){var t=e.week,a=e.onNext,n=e.onPrev,r=d()().week();return Object(j.jsxs)("div",{className:"control",children:[r<t&&Object(j.jsx)("div",{className:"control-button",onClick:n,children:"< Previous week"}),r<t&&52!==t&&Object(j.jsx)("div",{className:"divider"}),t<52&&Object(j.jsx)("div",{className:"control-button",onClick:a,children:"Next week >"})]})}function V(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(j.jsxs)("div",{className:"legend-container",children:[Object(j.jsxs)("div",{onClick:function(){return r(!a)},className:"legend-button",children:["Legend ",a?Object(j.jsx)(j.Fragment,{children:"\u25b2"}):Object(j.jsx)(j.Fragment,{children:"\u25bc"})]}),a&&Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"legend",children:[Object(j.jsx)("div",{className:"legend-color legend-availible"}),Object(j.jsx)("div",{className:"legend-text",children:"Timeslot is availible to select"})]}),Object(j.jsxs)("div",{className:"legend",children:[Object(j.jsx)("div",{className:"legend-color occupied"}),Object(j.jsx)("div",{className:"legend-text",children:"Timeslot is already selected by patient"})]}),Object(j.jsxs)("div",{className:"legend",children:[Object(j.jsx)("div",{className:"legend-color invalid"}),Object(j.jsx)("div",{className:"legend-text",children:"Dr. Albert Crentist is either not working or is on lunch break, or it's past date"})]}),Object(j.jsxs)("div",{className:"legend",children:[Object(j.jsx)("div",{className:"legend-color selected"}),Object(j.jsx)("div",{className:"legend-text",children:"Timeslot you have previously selected"})]})]})]})}function P(){var e=Object(n.useState)(d()().week()),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(j.jsxs)(v,{children:[Object(j.jsx)(y,{week:a}),Object(j.jsx)(L,{week:a}),Object(j.jsx)(F,{week:a,onNext:function(){r(a+1)},onPrev:function(){r(a-1)}}),Object(j.jsx)(V,{})]})}a(25);function B(){return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"header",children:"Dr. Albert Crentist's office hours"}),Object(j.jsx)(P,{})]})}function z(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(B,{})})}var K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,27)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(z,{})}),document.getElementById("root")),K()}},[[26,1,2]]]);
//# sourceMappingURL=main.22d7aa5c.chunk.js.map